# app开发流程标准化

本文主要讲app端的开发流程

## Git Flow

先说下万物基本，Git ，推荐app端采用 Git Flow 流程，如下图所示

![](imgs/gitflow.png)

#### 各分支介绍

1. develop: 开发分支，用于合并各个feature，也可直接在develop上开发
2. feature: 功能分支，当你觉得要做某一块较大的单独业务时，用这个
3. release: 测试分支，预发布，比如V1.0，该分支上仅用于修复bug
4. hotfix:  已发布版本的紧急修复，很少用到
5. master: 真正发布用的分支，严禁在此分支上开发


推荐使用 [sourcetree](https://www.sourcetreeapp.com/) ,自带 git flow 


## App的几个版本

通过以上各分支的使用，可以将测试阶段大致分为三种版本

1. 开发版本 （develop , feature）
2. 测试版本  (release)
3. 发布版本  (master)


## 测试

很多时候，测试出问题的版本，并不是最新版，或者测试版本里忘记更改版本号，某个字段未关闭，导致线上出现重大问题


1. 重要开关自动化。如log开关，测试版本开关，android可以通过BuildConfig.DEBUG来设置变量，release版本自动false 
2. 使用CI来发版，开发只需对git分支进行操作，相关测试人去指定地方安装apk，避免app版本不同步的问题

## CI

1. 自动拉取代码
2. build app
3. 发布到指定环境 (内网或外网下载地址)



## App的一些优化

1. 加入测试界面，仅在develop分支上开启。 发布版本关闭
2. 测试界面提供一些方便测试的操作
3. 添加测试专用的升级服务，当测试版本有更新时，app内提示，这样不用测试人员每次都去网页下载app
4. app的内部反馈，可以考虑集成第三方服务

## 代理服务器

1. 若没有测试服务器，或者无法随意修改返回字段时，可以通过搭设中间服务器，拦截服务器返回字段，修改变量，测试app相关功能


